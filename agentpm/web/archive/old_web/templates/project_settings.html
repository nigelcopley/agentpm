{% extends "layouts/modern_base.html" %}

{% block title %}Project Settings - {{ project.name }}{% endblock %}

{% block breadcrumb %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/"><i class="bi bi-house"></i> Dashboard</a></li>
    <li class="breadcrumb-item active" aria-current="page">Settings</li>
  </ol>
</nav>
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-lg-8">
    <div class="card shadow-sm">
      <div class="card-header bg-gradient">
        <h4 class="mb-0">
          <i class="bi bi-gear"></i> Project Settings
        </h4>
      </div>
      <div class="card-body">

        <!-- Basic Information Section -->
        <div class="mb-4">
          <h5 class="border-bottom pb-2 mb-3">Basic Information</h5>

          <!-- Project Name -->
          <div class="mb-3">
            <label class="form-label fw-bold">Project Name: <span class="text-danger">*</span></label>
            <div id="project-name-container">
              {% include 'partials/project_name_field.html' with context %}
            </div>
            <small class="form-text text-muted">The display name for your project (1-200 characters)</small>
          </div>

          <!-- Description -->
          <div class="mb-3">
            <label class="form-label fw-bold">Description:</label>
            <div id="project-description-container">
              {% include 'partials/project_description_field.html' with context %}
            </div>
            <small class="form-text text-muted">Brief description of the project's purpose (max 1000 characters)</small>
          </div>
        </div>

        <!-- Technology Stack Section -->
        <div class="mb-4">
          <h5 class="border-bottom pb-2 mb-3">Technology Stack</h5>

          <!-- Tech Stack -->
          <div class="mb-3">
            <label class="form-label fw-bold">Technologies:</label>
            <div id="project-tech-stack-container">
              {% include 'partials/project_tech_stack_field.html' with context %}
            </div>
            <small class="form-text text-muted">Comma-separated list of technologies (e.g., Python 3.11, Flask 3.0, SQLite)</small>
          </div>
        </div>

        <!-- Project Path (Read-Only) -->
        <div class="mb-4">
          <h5 class="border-bottom pb-2 mb-3">Project Path</h5>
          <div class="mb-3">
            <label class="form-label fw-bold">Root Directory:</label>
            <div class="alert alert-light d-flex align-items-center">
              <i class="bi bi-folder me-2"></i>
              <code>{{ project.path or 'Not set' }}</code>
            </div>
            <small class="form-text text-muted">Project root path is set during initialization and cannot be changed</small>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Sidebar with Metadata -->
  <div class="col-lg-4">
    <div class="card shadow-sm">
      <div class="card-header bg-light">
        <h5 class="mb-0">Project Metadata</h5>
      </div>
      <div class="card-body">
        <dl class="row mb-0">
          <dt class="col-sm-6">Status:</dt>
          <dd class="col-sm-6">
            <span class="badge badge-{{ 'success' if project.status.value == 'active' else 'secondary' }}">
              {{ project.status.value }}
            </span>
          </dd>

          <dt class="col-sm-6">Created:</dt>
          <dd class="col-sm-6">
            {{ project.created_at.strftime('%Y-%m-%d') if project.created_at else 'N/A' }}
          </dd>

          <dt class="col-sm-6">Last Updated:</dt>
          <dd class="col-sm-6">
            {{ project.updated_at.strftime('%Y-%m-%d') if project.updated_at else 'N/A' }}
          </dd>

          <dt class="col-sm-6">Project ID:</dt>
          <dd class="col-sm-6"><code>{{ project.id }}</code></dd>
        </dl>
      </div>
    </div>

    <!-- Help Card -->
    <div class="card shadow-sm mt-3">
      <div class="card-header bg-light">
        <h6 class="mb-0"><i class="bi bi-info-circle"></i> Need Help?</h6>
      </div>
      <div class="card-body">
        <p class="small mb-2">Click the <i class="bi bi-pencil text-primary"></i> icon to edit any field.</p>
        <p class="small mb-2">Changes are saved immediately when you click Save.</p>
        <p class="small mb-0">Click Cancel to discard changes.</p>
      </div>
    </div>
  </div>
</div>
{% endblock %}
