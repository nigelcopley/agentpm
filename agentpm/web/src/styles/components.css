/**
 * APM (Agent Project Manager) Component Library - Tailwind v4 Native
 * Theme-aware components using @theme directive
 * 
 * @version 2.0.0
 * @author APM (Agent Project Manager)
 */

@import "tailwindcss";

/* ==========================================
   Button Components
   ========================================== */

@layer components {
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    background-color: var(--color-primary-500);
    color: white;
  }
  
  .btn-primary:hover {
    background-color: var(--color-primary-600);
  }
  
  .btn-primary:focus {
    @apply ring-2 ring-offset-2;
    --tw-ring-color: var(--color-primary-500);
  }

  .btn-secondary {
    background-color: var(--color-secondary-500);
    color: white;
  }
  
  .btn-secondary:hover {
    background-color: var(--color-secondary-600);
  }
  
  .btn-secondary:focus {
    @apply ring-2 ring-offset-2;
    --tw-ring-color: var(--color-secondary-500);
  }

  .btn-outline-primary {
    @apply border-2;
    border-color: var(--color-primary-500);
    color: var(--color-primary-500);
    background-color: transparent;
  }
  
  .btn-outline-primary:hover {
    background-color: var(--color-primary-500);
    color: white;
  }
  
  .btn-outline-primary:focus {
    @apply ring-2 ring-offset-2;
    --tw-ring-color: var(--color-primary-500);
  }

  .btn-outline-secondary {
    @apply border-2;
    border-color: var(--color-secondary-500);
    color: var(--color-secondary-500);
    background-color: transparent;
  }
  
  .btn-outline-secondary:hover {
    background-color: var(--color-secondary-500);
    color: white;
  }
  
  .btn-outline-secondary:focus {
    @apply ring-2 ring-offset-2;
    --tw-ring-color: var(--color-secondary-500);
  }

  .btn-ghost {
    color: var(--color-primary-500);
    background-color: transparent;
  }
  
  .btn-ghost:hover {
    background-color: var(--color-primary-50);
  }
  
  .btn-ghost:focus {
    @apply ring-2 ring-offset-2;
    --tw-ring-color: var(--color-primary-500);
  }

  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  .btn-lg {
    @apply px-6 py-3 text-base;
  }

  .btn-xl {
    @apply px-8 py-4 text-lg;
  }
}

/* ==========================================
   Card Components
   ========================================== */

@layer components {
  .card {
    background-color: var(--color-surface-primary);
    border: 1px solid var(--color-border-primary);
    @apply rounded-lg shadow-sm overflow-hidden;
  }

  .card-elevated {
    @apply shadow-md hover:shadow-lg transition-shadow duration-200;
  }

  .card-interactive {
    @apply cursor-pointer hover:shadow-md hover:-translate-y-1 transition-all duration-200;
  }

  .card-header {
    @apply px-6 py-4 border-b;
    border-color: var(--color-border-primary);
    background-color: var(--color-surface-secondary);
  }

  .card-body {
    @apply px-6 py-4;
  }

  .card-footer {
    @apply px-6 py-4 border-t;
    border-color: var(--color-border-primary);
    background-color: var(--color-surface-secondary);
  }

  .card-title {
    @apply text-lg font-semibold;
    color: var(--color-text-primary);
  }

  .card-subtitle {
    @apply text-sm;
    color: var(--color-text-secondary);
  }

  .card-description {
    @apply text-sm mt-2;
    color: var(--color-text-tertiary);
  }
}

/* ==========================================
   Form Components
   ========================================== */

@layer components {
  .form-group {
    @apply mb-4;
  }

  .form-label {
    @apply block text-sm font-medium mb-2;
    color: var(--color-text-primary);
  }

  .form-input {
    @apply w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 disabled:cursor-not-allowed;
    border-color: var(--color-border-primary);
    background-color: var(--color-surface-primary);
    color: var(--color-text-primary);
  }
  
  .form-input:focus {
    border-color: var(--color-border-focus);
    @apply ring-2;
    --tw-ring-color: var(--color-primary-500);
  }
  
  .form-input:disabled {
    background-color: var(--color-surface-secondary);
  }

  .form-input-error {
    border-color: var(--color-border-error);
  }
  
  .form-input-error:focus {
    @apply ring-2;
    --tw-ring-color: var(--color-error-500);
  }

  .form-textarea {
    @apply w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 disabled:cursor-not-allowed resize-y min-h-[100px];
    border-color: var(--color-border-primary);
    background-color: var(--color-surface-primary);
    color: var(--color-text-primary);
  }
  
  .form-textarea:focus {
    border-color: var(--color-border-focus);
    --tw-ring-color: var(--color-primary-500);
  }
  
  .form-textarea:disabled {
    background-color: var(--color-surface-secondary);
  }

  .form-select {
    @apply w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 disabled:cursor-not-allowed pr-10;
    border-color: var(--color-border-primary);
    background-color: var(--color-surface-primary);
    color: var(--color-text-primary);
  }
  
  .form-select:focus {
    border-color: var(--color-border-focus);
    --tw-ring-color: var(--color-primary-500);
  }
  
  .form-select:disabled {
    background-color: var(--color-surface-secondary);
  }

  .form-checkbox {
    @apply h-4 w-4 rounded focus:ring-2;
    color: var(--color-primary-500);
    border-color: var(--color-border-primary);
  }
  
  .form-checkbox:focus {
    @apply ring-2;
    --tw-ring-color: var(--color-primary-500);
  }

  .form-radio {
    @apply h-4 w-4 focus:ring-2;
    color: var(--color-primary-500);
    border-color: var(--color-border-primary);
  }
  
  .form-radio:focus {
    @apply ring-2;
    --tw-ring-color: var(--color-primary-500);
  }

  .form-switch {
    @apply relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2;
    background-color: var(--color-neutral-300);
  }
  
  .form-switch:focus {
    @apply ring-2 ring-offset-2;
    --tw-ring-color: var(--color-primary-500);
  }

  .form-switch-checked {
    background-color: var(--color-primary-500);
  }

  .form-switch-thumb {
    @apply inline-block h-4 w-4 transform rounded-full bg-white transition-transform;
  }

  .form-switch-thumb-checked {
    @apply translate-x-6;
  }

  .form-error {
    @apply text-sm mt-1;
    color: var(--color-error-500);
  }

  .form-help {
    @apply text-sm mt-1;
    color: var(--color-text-tertiary);
  }
}

/* ==========================================
   Badge Components
   ========================================== */

@layer components {
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-primary {
    background-color: var(--color-primary-100);
    color: var(--color-primary-800);
  }

  .badge-secondary {
    background-color: var(--color-secondary-100);
    color: var(--color-secondary-800);
  }

  .badge-success {
    background-color: var(--color-success-100);
    color: var(--color-success-800);
  }

  .badge-warning {
    background-color: var(--color-warning-100);
    color: var(--color-warning-800);
  }

  .badge-error {
    background-color: var(--color-error-100);
    color: var(--color-error-800);
  }

  .badge-info {
    background-color: var(--color-info-100);
    color: var(--color-info-800);
  }

  .badge-neutral {
    background-color: var(--color-neutral-100);
    color: var(--color-neutral-800);
  }

  .badge-sm {
    @apply px-2 py-0.5 text-xs;
  }

  .badge-lg {
    @apply px-3 py-1 text-sm;
  }
}

/* ==========================================
   Alert Components
   ========================================== */

@layer components {
  .alert {
    @apply p-4 rounded-md border-l-4;
  }

  .alert-success {
    background-color: var(--color-success-50);
    border-left-color: var(--color-success-500);
    color: var(--color-success-800);
  }

  .alert-warning {
    background-color: var(--color-warning-50);
    border-left-color: var(--color-warning-500);
    color: var(--color-warning-800);
  }

  .alert-error {
    background-color: var(--color-error-50);
    border-left-color: var(--color-error-500);
    color: var(--color-error-800);
  }

  .alert-info {
    background-color: var(--color-info-50);
    border-left-color: var(--color-info-500);
    color: var(--color-info-800);
  }

  .alert-title {
    @apply font-medium mb-1;
  }

  .alert-description {
    @apply text-sm;
  }
}

/* ==========================================
   Navigation Components
   ========================================== */

@layer components {
  .nav {
    @apply flex space-x-8;
  }

  .nav-item {
    @apply relative;
  }

  .nav-link {
    @apply px-3 py-2 text-sm font-medium transition-colors duration-200;
    color: var(--color-text-secondary);
  }
  
  .nav-link:hover {
    color: var(--color-text-primary);
  }

  .nav-link-active {
    color: var(--color-primary-500);
  }

  .nav-link-active::after {
    @apply absolute bottom-0 left-0 w-full h-0.5;
    background-color: var(--color-primary-500);
    content: '';
  }

  .nav-vertical {
    @apply flex-col space-x-0 space-y-1;
  }

  .nav-vertical .nav-link {
    @apply px-3 py-2 rounded-md;
  }

  .nav-vertical .nav-link-active {
    background-color: var(--color-primary-50);
    color: var(--color-primary-500);
  }
}

/* ==========================================
   AIPM-Specific Components
   ========================================== */

@layer components {
  .phase-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium font-semibold;
  }

  .phase-badge-d1 {
    background-color: color-mix(in srgb, var(--color-phase-d1) 10%, transparent);
    color: var(--color-phase-d1);
  }

  .phase-badge-p1 {
    background-color: color-mix(in srgb, var(--color-phase-p1) 10%, transparent);
    color: var(--color-phase-p1);
  }

  .phase-badge-i1 {
    background-color: color-mix(in srgb, var(--color-phase-i1) 10%, transparent);
    color: var(--color-phase-i1);
  }

  .phase-badge-r1 {
    background-color: color-mix(in srgb, var(--color-phase-r1) 10%, transparent);
    color: var(--color-phase-r1);
  }

  .phase-badge-o1 {
    background-color: color-mix(in srgb, var(--color-phase-o1) 10%, transparent);
    color: var(--color-phase-o1);
  }

  .phase-badge-e1 {
    background-color: color-mix(in srgb, var(--color-phase-e1) 10%, transparent);
    color: var(--color-phase-e1);
  }

  .confidence-indicator {
    @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium;
  }

  .confidence-high {
    background-color: color-mix(in srgb, var(--color-confidence-green) 10%, transparent);
    color: var(--color-confidence-green);
  }

  .confidence-medium {
    background-color: color-mix(in srgb, var(--color-confidence-yellow) 10%, transparent);
    color: var(--color-confidence-yellow);
  }

  .confidence-low {
    background-color: color-mix(in srgb, var(--color-confidence-red) 10%, transparent);
    color: var(--color-confidence-red);
  }

  .enforcement-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium font-semibold;
  }

  .enforcement-block {
    background-color: var(--color-error-100);
    color: var(--color-error-800);
  }

  .enforcement-limit {
    background-color: var(--color-warning-100);
    color: var(--color-warning-800);
  }

  .enforcement-guide {
    background-color: var(--color-info-100);
    color: var(--color-info-800);
  }

  .enforcement-enhance {
    background-color: var(--color-success-100);
    color: var(--color-success-800);
  }
}

/* ==========================================
   Metric Components
   ========================================== */

@layer components {
  .metric-card {
    @apply rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 overflow-hidden;
    background-color: var(--color-surface-primary);
    border: 1px solid var(--color-border-primary);
  }

  .metric-value {
    @apply text-3xl font-bold;
    color: var(--color-primary-500);
  }

  .metric-label {
    @apply text-sm uppercase tracking-wide;
    color: var(--color-text-secondary);
  }

  .metric-change {
    @apply text-sm font-medium;
  }

  .metric-change-positive {
    color: var(--color-success-500);
  }

  .metric-change-negative {
    color: var(--color-error-500);
  }

  .metric-change-neutral {
    color: var(--color-text-tertiary);
  }
}

/* ==========================================
   Progress Components
   ========================================== */

@layer components {
  .progress {
    @apply w-full rounded-full h-2;
    background-color: var(--color-surface-secondary);
  }

  .progress-bar {
    @apply h-2 rounded-full transition-all duration-300;
  }

  .progress-bar-primary {
    background-color: var(--color-primary-500);
  }

  .progress-bar-success {
    background-color: var(--color-success-500);
  }

  .progress-bar-warning {
    background-color: var(--color-warning-500);
  }

  .progress-bar-error {
    background-color: var(--color-error-500);
  }

  .progress-lg {
    @apply h-4;
  }

  .progress-sm {
    @apply h-1;
  }
}

/* ==========================================
   Loading Components
   ========================================== */

@layer components {
  .loading-spinner {
    @apply inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin;
  }

  .loading-spinner-sm {
    @apply w-3 h-3;
  }

  .loading-spinner-lg {
    @apply w-6 h-6;
  }

  .loading-dots {
    @apply inline-flex space-x-1;
  }

  .loading-dot {
    @apply w-2 h-2 bg-current rounded-full animate-pulse;
  }

  .loading-dot:nth-child(2) {
    animation-delay: 0.1s;
  }

  .loading-dot:nth-child(3) {
    animation-delay: 0.2s;
  }
}

/* ==========================================
   Theme Switcher Components
   ========================================== */

@layer components {
  .theme-selector {
    @apply w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 disabled:cursor-not-allowed pr-10;
    border-color: var(--color-border-primary);
    background-color: var(--color-surface-primary);
    color: var(--color-text-primary);
  }
  
  .theme-selector:focus {
    border-color: var(--color-border-focus);
    --tw-ring-color: var(--color-primary-500);
  }
  
  .theme-selector:disabled {
    background-color: var(--color-surface-secondary);
  }

  .theme-toggles {
    @apply flex space-x-2;
  }

  .theme-toggle {
    @apply inline-flex items-center justify-center px-3 py-1.5 text-xs font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed border-2;
    border-color: var(--color-primary-500);
    color: var(--color-primary-500);
    background-color: transparent;
  }
  
  .theme-toggle:hover {
    background-color: var(--color-primary-500);
    color: white;
  }
  
  .theme-toggle:focus {
    @apply ring-2 ring-offset-2;
    --tw-ring-color: var(--color-primary-500);
  }

  .theme-toggle.active {
    background-color: var(--color-primary-500);
    color: white;
  }

  .theme-preview-controls {
    @apply flex space-x-2 mt-2;
  }

  .theme-indicator {
    @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium;
  }
}

/* ==========================================
   Responsive Design
   ========================================== */

@media (max-width: 640px) {
  .card-body {
    @apply px-4 py-3;
  }
  
  .nav {
    @apply flex-col space-x-0 space-y-2;
  }
}

/* ==========================================
   Animation Utilities
   ========================================== */

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
  from { transform: translateX(-20px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes scaleIn {
  from { transform: scale(0.95); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

.animate-slide-in {
  animation: slideIn 0.3s ease-out;
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out;
}

/* ==========================================
   Accessibility Utilities
   ========================================== */

.sr-only {
  @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
}

.focus-visible {
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
  --tw-ring-color: var(--color-primary-500);
}